<app-nav></app-nav>
<section>
  <div class="container">
    <div class="left col-lg-8 col-sm-12 col-md-8 mt-5 mb-3">
      <form action="" [formGroup]="adForm">
        <div class="row">
          <div class="col-md-4 form-group">
            <label for="budgetTitle"
              >Ad images<span class="text-danger">*</span></label
            >
            <div class="upload-document-wrapper mb-3 d-flex align-items-center">
              <input
                type="file"
                (change)="addFile($event.target.files)"
                name="file"
                id="file"
                class="inputfile"
                data-preview-file-type="text"
                accept="application/img"
              />
              <label for="file">
                <div class="file-upload-holder d-flex align-items-center">
                  <img
                    src="../../../assets/images/cloud-upload.svg"
                    alt="Upload"
                  />
                  <span>
                    {{
                      images?.length > 0 ? "Add more images" : "Choose image"
                    }}</span
                  >
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-8 mt-5">
            <div class="d-flex flex-wrap">
              <div class="adImg-wrapper" *ngFor="let adImage of images">
                <div class="remove">
                  <svg
                    (click)="removeImage(adImage?.id)"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    aria-hidden="true"
                    focusable="false"
                    width="1em"
                    height="1em"
                    style="
                      -ms-transform: rotate(360deg);
                      -webkit-transform: rotate(360deg);
                      transform: rotate(360deg);
                    "
                    preserveAspectRatio="xMidYMid meet"
                    viewBox="0 0 1024 1024"
                  >
                    <path
                      d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4l-66.1-.3c-4.4 0-8 3.5-8 8c0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4l66 .3c4.4 0 8-3.5 8-8c0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"
                      fill="red"
                    />
                    <path
                      d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448s448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z"
                      fill="red"
                    />
                  </svg>
                </div>
                <img src="{{ adImage.imageUrl }}" alt="" />
              </div>
            </div>
          </div>
        </div>

        <div class="mt-2 mb-3 col-12">
          <p class="font24 text-grey">Added images</p>
          <div class="d-flex flex-wrap">
            <div
              class="adImg-wrapper"
              *ngFor="let adImage of addedImagesToView"
            >
              <div class="remove">
                <svg
                  (click)="removeaddedImage(adImage)"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  aria-hidden="true"
                  focusable="false"
                  width="1em"
                  height="1em"
                  style="
                    -ms-transform: rotate(360deg);
                    -webkit-transform: rotate(360deg);
                    transform: rotate(360deg);
                  "
                  preserveAspectRatio="xMidYMid meet"
                  viewBox="0 0 1024 1024"
                >
                  <path
                    d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4l-66.1-.3c-4.4 0-8 3.5-8 8c0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4l66 .3c4.4 0 8-3.5 8-8c0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"
                    fill="red"
                  />
                  <path
                    d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448s448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z"
                    fill="red"
                  />
                </svg>
              </div>
              <img src="{{ adImage.imageUrl }}" alt="" />
            </div>
          </div>
        </div>
        <div class="mt-5 mb-3 col-12">
          <p class="font24 text-grey">Title</p>
          <input
            class="form-control"
            type="text"
            formControlName="title"
            [ngClass]="{
              'is-invalid':
                adForm.get('title').errors && adForm.get('title').touched
            }"
          />
          <div class="invalid-feedback mt-0 p-0">
            Please enter ad title
          </div>
        </div>
        <div class="mt-4 mb-2 col-12">
          <p class="font24 text-grey">Description</p>
          <div class="bg-white px-1 py-3 border-radius">
            <angular-editor
              [config]="config"
              formControlName="description"
              [ngClass]="{
                'is-invalid':
                  adForm.get('description').errors &&
                  adForm.get('description').touched
              }"
            ></angular-editor>
          </div>
          <div class="invalid-feedback mt-0 p-0">
            Describe this ad in a few words
          </div>
        </div>
        <div class="row mt-2 mb-2 mx-0">
          <div class="col-lg-6 col-sm-12">
            <p class="font24 text-grey">Category</p>
            <select
              class="form-control"
              (change)="getAllSubCategories($event.target.value)"
            >
              <option value="" disabled selected> --select category--</option>
              <option
                *ngFor="let category of categories"
                value="{{ category?.slug }}"
                >{{ category?.name }}</option
              >
            </select>
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="font24 text-grey">Subcategory</p>
            <select
              #selected
              formControlName="subCategoryId"
              class="form-control"
              (click)="getSubcategory(selected.value)"
              [ngClass]="{
                'is-invalid':
                  adForm.get('subCategoryId').errors &&
                  adForm.get('subCategoryId').touched
              }"
            >
              <option
                *ngFor="let subCategory of subCategories"
                value="{{ subCategory?.id }}"
              >
                {{ subCategory?.name }}</option
              >
            </select>
          </div>
        </div>
        <div class="row mt-2 mb-2 mx-0">
          <div class="col-lg-12 col-sm-12">
            <p class="font24 text-grey">Daily Price</p>
            <div class="d-flex justify-content-between">
              <div class="col-lg-6 col-sm-6 pl-0">
                <input
                  class="form-control"
                  type="text"
                  [value]="ad.dailyPrice | currency"
                  formControlName="dailyPrice"
                  [ngClass]="{
                    'is-invalid':
                      adForm.get('dailyPrice').errors &&
                      adForm.get('dailyPrice').touched
                  }"
                />
                <div class="invalid-feedback mt-0 p-0">
                  State your daily price
                </div>
              </div>
              <div class="col-lg-6 col-sm-6">
                <input
                  type="checkbox"
                  id="negotiable"
                  formControlName="negotiable"
                />
                <label class="ml-2 font24 text-grey" for="negotiable"
                  >Negotiable</label
                >
              </div>
            </div>
            <p class="font24 text-grey">Weekly Price</p>
            <div class="d-flex justify-content-between">
              <div class="col-lg-6 col-sm-6 pl-0">
                <input
                  class="form-control"
                  type="text"
                  formControlName="weeklyPrice"
                  [ngClass]="{
                    'is-invalid':
                      adForm.get('weeklyPrice').errors &&
                      adForm.get('weeklyPrice').touched
                  }"
                />
                <div class="invalid-feedback mt-0 p-0">
                  State your weekly Price
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-2 mb-2 mx-0">
          <div class="col-lg-6 col-sm-12">
            <p class="font24 text-grey">State</p>
            <select
              class="form-control"
              (change)="getRegions($event.target.value)"
            >
              <option value="" disabled selected> --select state-- </option>
              <option *ngFor="let state of states" value="{{ state?.code }}">{{
                state?.name
              }}</option>
            </select>
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="font24 text-grey">Region</p>
            <select
              formControlName="regionId"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  adForm.get('regionId').errors &&
                  adForm.get('regionId').touched
              }"
            >
              <option *ngFor="let region of regions" value="{{ region?.id }}">
                {{ region?.name }}</option
              >
            </select>
          </div>
        </div>
        <div class="text-right my-5 d-flex justify-content-end">
          <button
            class="btn my-button-gr ml-4"
            (click)="boostAd()"
            *ngIf="adForm.get('boosted').value == false"
            [disabled]="adForm.get('subCategoryId').value == ''"
          >
            Boost Ad
          </button>
          <button
            class="btn my-button-gr ml-4"
            (click)="unboostAd()"
            *ngIf="adForm.get('boosted').value == true"
          >
            Unboost Ad
          </button>
          <button
            class="btn my-button ml-4"
            (click)="editAd()"
            [disabled]="adForm.invalid"
          >
            Update Ad
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
<app-footer></app-footer>
